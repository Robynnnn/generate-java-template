(function(){"use strict";var e={9499:function(e,t,a){var r=a(7195),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},s=[],i=a(1001),n={},l=(0,i.Z)(n,o,s,!1,null,null,null),d=l.exports,p=a(2241),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-container"},[t("el-form",{staticClass:"form",attrs:{model:e.form,"label-width":"120px"}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"form-item",attrs:{label:"表名"}},[t("el-input",{model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"form-item",attrs:{label:"生成sql数据数量"}},[t("el-input",{model:{value:e.form.dataNum,callback:function(t){e.$set(e.form,"dataNum",e._n(t))},expression:"form.dataNum"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"form-item",attrs:{label:"表字段"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.tableFields,callback:function(t){e.$set(e.form,"tableFields",t)},expression:"form.tableFields"}})],1)],1)],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"form-item",attrs:{label:"模块名"}},[t("el-input",{model:{value:e.form.moduleName,callback:function(t){e.$set(e.form,"moduleName",t)},expression:"form.moduleName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"form-item",attrs:{label:"前端url名称"}},[t("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"form-item submit-btn mgc",attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v("一键生成 ")])],1)],1)],1),e.showTemplate?t("div",{staticClass:"container"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("p",[e._v("对应 java 语句：")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"sql"},[e._v(e._s(e.singleJavaCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.singleJavaCode,expression:"singleJavaCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("p",[e._v("生成随机的"+e._s(e.form.dataNum)+"条 sql 语句：")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"sql"},[e._v(e._s(e.randomSqlCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.randomSqlCode,expression:"randomSqlCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应 pgsql 语句：")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"sql"},[e._v(e._s(e.pgsqlCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.pgsqlCode,expression:"pgsqlCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])]),t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应 mysql 语句：")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"sql"},[e._v(e._s(e.mysqlCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.mysqlCode,expression:"mysqlCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])])],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的 vo 文件代码："+e._s(e.moduleName)+"VO")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.voJavaCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.voJavaCode,expression:"voJavaCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])]),t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的 condition 文件代码："+e._s(e.moduleName)+"PageCondition")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.pageConditionJavaCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.pageConditionJavaCode,expression:"pageConditionJavaCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])])],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的 repository/entity 文件代码："+e._s(e.moduleName))]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.entityCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.entityCode,expression:"entityCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])]),t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的 repository/mapper 文件代码："+e._s(e.moduleName)+"Mapper")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.mapperCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.mapperCode,expression:"mapperCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])])],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的 repository 文件代码："+e._s(e.moduleName)+"Repository")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.repositoryCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.repositoryCode,expression:"repositoryCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])]),t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的 service/impl 文件代码："+e._s(e.moduleName)+"Impl")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.implCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.implCode,expression:"implCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])])],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的 service 文件代码：I"+e._s(e.moduleName)+"Service")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.serviceCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.serviceCode,expression:"serviceCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])]),t("el-col",{attrs:{span:12}},[t("div",[t("p",[e._v("对应的controller文件代码：")]),t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"preCode"},[t("code",{staticClass:"java"},[e._v(e._s(e.controllerJavaCode))]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.controllerJavaCode,expression:"controllerJavaCode"}],staticClass:"copy-btn",attrs:{type:"primary"}},[e._v("复制")])],1)])])],1)],1):e._e()],1)},c=[],u=(a(7658),a(3059)),h=a.n(u);const v={indent_size:4,indent_char:" ",preserve_newlines:!0,max_preserve_newlines:2};var C={name:"GenerateJavaTemplate",data(){return{form:{tableName:"",tableFields:"",permission:"",dataNum:0,moduleName:"",url:""},showTemplate:!1,singleJavaCode:"",pgsqlCode:"",moduleName:"",controllerJavaCode:"",voJavaCode:"",entityCode:"",pageConditionJavaCode:"",mapperCode:"",repositoryCode:"",implCode:"",serviceCode:"",mysqlCode:"",randomSqlCode:"",userInputCode:""}},methods:{handleSubmit(){this.showTemplate=!1,this.moduleName=this.capitalizeFirstLetter(this.form.moduleName),this.randomSqlCode=this.generateSqlCode(this.form.tableFields,this.form.dataNum),this.singleJavaCode=this.generateSingleCode(),this.pgsqlCode=this.generatePgSql(),this.mysqlCode=this.generateMysqlCode(),this.controllerJavaCode=this.generateController(),this.voJavaCode=this.generateVoCode(),this.pageConditionJavaCode=this.generatePageConditionCode(),this.entityCode=this.generateEntityCode(),this.mapperCode=this.generateMapperCode(),this.repositoryCode=this.generateRepositoryCode(),this.implCode=this.generateImplCode(),this.serviceCode=this.generateServiceCode(),this.$nextTick((()=>{let e=null;e=setTimeout((()=>{clearTimeout(e),this.showTemplate=!0}),500)}))},generateSqlCode(e,t){const a=e.split(",\n").filter((e=>""!==e.trim())),r=a.map((e=>{const t=this.removeExtraSpaces(e),a=t.split(/\s+/),r=a[0],o=a[1],s=a.includes("NOT")&&a.includes("NULL");return{name:r,type:o,notNull:s}}));let o="";for(let s=0;s<t;s++)o+=`INSERT INTO ${this.form.tableName} (${r.map((e=>e.name)).join(", ")})\n                VALUES (`,o+=r.map((e=>e.type.toUpperCase().startsWith("VARCHAR")||e.type.toUpperCase().startsWith("CHAR")||e.type.toUpperCase().startsWith("TEXT")?`'${this.getRandomString()}'`:e.type.toUpperCase().startsWith("INT")||e.type.toUpperCase().startsWith("BIGINT")||e.type.toUpperCase().startsWith("DECIMAL")||e.type.toUpperCase().startsWith("SMALLINT")?Math.floor(1e3*Math.random()):e.type.toUpperCase().startsWith("FLOAT")||e.type.toUpperCase().startsWith("DOUBLE")?1e3*Math.random():"DATE"===e.type.toUpperCase()||"TIME"===e.type.toUpperCase()||"DATETIME"===e.type.toUpperCase()||"TIMESTAMP"===e.type.toUpperCase()?`'${this.getRandomDateTime()}'`:"null")).join(", "),o+=");\n";return o},getRandomString(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},getRandomDateTime(){const e=new Date(Date.now()-Math.floor(1e10*Math.random()));return`${e.getFullYear()}-${this.padZero(e.getMonth()+1)}-${this.padZero(e.getDate())} ${this.padZero(e.getHours())}:${this.padZero(e.getMinutes())}:${this.padZero(e.getSeconds())}`},padZero(e){return e<10?`0${e}`:e},formattedCode(e){return e.replace(/\n/g," ")},removeExtraSpaces(e){return e.endsWith(",")&&(e=e.slice(0,-1)),e.replace(/\s+/g," ").trim()},fontmattedShowCode(e){return this.removeExtraSpaces(e).replace(/,\s*/g,",\n")},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},generateSingleCode(){return this.generateJavaCode(this.form.tableFields)},generatePgSql(){console.log(this.fontmattedShowCode(this.form.tableFields),"fontmattedShowCode");let e=`CREATE TABLE ${this.form.tableName}\n                      (\n                        id BIGINT NOT NULL\n                          CONSTRAINT ${this.form.tableName}_pkey\n                            PRIMARY KEY,\n                        ${this.fontmattedShowCode(this.form.tableFields)}\n                      );`;return h()(e,v)},generateMysqlCode(){let e=`CREATE TABLE ${this.form.tableName}\n                      (\n                        id BIGINT NOT NULL\n                          CONSTRAINT ${this.form.tableName}_pkey\n                            PRIMARY KEY,\n                        ${this.fontmattedShowCode(this.form.tableFields)}\n                      );`;return h()(e,v)},convertDBTypeToJavaType(e){const t=/^VARCHAR\((\d+)\)$/,a=/^DECIMAL\((\d+),(\d+)\)$/;if(e.toUpperCase().startsWith("INT")||e.toUpperCase().startsWith("SMALLINT"))return"Integer";if(e.toUpperCase().startsWith("BIGINT"))return"Long";if(e.toUpperCase().startsWith("FLOAT"))return"Float";if(e.toUpperCase().startsWith("DOUBLE"))return"Double";if(e.toUpperCase().startsWith("DECIMAL")){const[,t,r]=e.match(a);return`BigDecimal(${t}, ${r})`}if(e.toUpperCase().startsWith("CHAR")||e.toUpperCase().startsWith("VARCHAR")||e.toUpperCase().startsWith("TEXT")){const[,a]=e.toUpperCase().match(t);return"String"}return e.toUpperCase().startsWith("DATE")||e.toUpperCase().startsWith("TIME")||e.toUpperCase().startsWith("DATETIME")||e.toUpperCase().startsWith("TIMESTAMP")?"LocalDateTime":e.toUpperCase().startsWith("BOOLEAN")?"Boolean":"Object"},convertDBColumnToJavaProperty(e){let[t,a,r]=e.split(" "),o=this.convertDBTypeToJavaType(a),s=t.replace(/_(\w)/g,((e,t)=>t.toUpperCase()));return`private ${o} ${s};\n`},generateJavaCode(e){console.log(e,"str");const t=e.split(",\n");let a="";return t.forEach((e=>{const t=this.removeExtraSpaces(e);console.log(t,"handleItem"),a+=t?this.convertDBColumnToJavaProperty(t):""})),a},generateCreateFunction(e,t,a){let r=e.split(";\n").join(";");const o=/private\s+(\w+)\s+(\w+);/g;let s=o.exec(r),i=[];while(null!==s)i.push({name:s[2],type:s[1]}),s=o.exec(r);let n="";for(let l=0;l<i.length;l++){let{name:e}=i[l];n+=`${t}.set${e.charAt(0).toUpperCase()+e.slice(1)}(${a}.get${e.charAt(0).toUpperCase()+e.slice(1)}());\n`}return n},generateController(){let e=`\n@Slf4j\n@RestController\n@Tag(name = "${this.moduleName}模块")\n@RequiredArgsConstructor\n@RequestMapping("")\npublic class ${this.moduleName}Controller implements BaseController, BaseDownloadController {\n  private final I${this.moduleName}Service service;\n  @GetMapping("${this.form.url}")\n  @Operation(summary = "查询${this.moduleName}分页数据")\n  @PamPrivilege(value = PASS)\n  public ResponseVO<PageVO<${this.moduleName}ListVO>> findPage(@Valid ${this.moduleName}PageCondition condition) {\n    return ResponseVO.success(service.findPage(condition));\n  }\n}\n      `;return h()(e,v)},generateVoCode(){const e=this.generateJavaCode(this.form.tableFields),t=this.generateCreateFunction(e,"vo","condition");let a=`\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Schema(description = "${this.moduleName}列表")\npublic class ${this.moduleName}ListVO implements BaseVO {\n    ${e}\n    public static ${this.moduleName}ListVO from(${this.moduleName} condition) {\n        ${this.moduleName}ListVO vo = new ${this.moduleName}ListVO();\n        ${t}\n        return vo;\n    }\n}\n      `;return h()(a,v)},generatePageConditionCode(){let e=`\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper = true)\npublic class ${this.moduleName}PageCondition extends AbstractPageCondition<${this.moduleName}> implements ConditionJwtAware {\n    @JsonIgnore\n    @Schema(hidden = true)\n    private JwtBody jwtBody;\n\n    @JsonIgnore\n    @Schema(hidden = true)\n    private LanguageEnum language;\n    @JsonIgnore\n    @Schema(hidden = true, description = "后端设置，数据权限")\n    private List<Long> canAccessDepartmentIds;\n\n    @Override\n    public OrderItem getDefaultOrder() {\n        return OrderItem.desc("created_time");\n    }\n}\n      `;return h()(e,v)},generateEntityCode(){const e=this.generateJavaCode(this.form.tableFields),t=this.generateCreateFunction(e,this.form.moduleName,"condition");let a=`\n@Data\n@Slf4j\n@TableName(value = "${this.form.tableName}", autoResultMap = true)\npublic class ${this.moduleName} implements BaseEntity<${this.moduleName}> {\n    @TableId(type = IdType.AUTO)\n    private Long id;\n     ${e}\n\n    public static ${this.moduleName} create(long id, ${this.moduleName}Condition condition) {\n        ${this.moduleName} ${this.form.moduleName} = new ${this.moduleName}();\n        LocalDateTime now = LocalDateTime.now();\n        ${this.form.moduleName}.setId(id);\n        ${t}\n        resourceSession.setUpdateTime(now);\n        return resourceSession;\n    }\n}\n\n      `;return h()(a,v)},generateMapperCode(){let e=`\n      public interface ${this.moduleName}Mapper extends BaseMapper<${this.moduleName}> {\n\n}\n      `;return h()(e,v)},generateRepositoryCode(){let e=`\n@Repository\npublic class ${this.moduleName}Repository extends ServiceImpl<${this.moduleName}Mapper, ${this.moduleName}> implements BaseIdGenerator {\n  public IPage<${this.moduleName}> findPage(long id, ${this.moduleName}PageCondition condition) {\n    return baseMapper.selectPage(condition.getPage(), Wrappers.lambdaQuery(${this.moduleName}.class)\n        .eq(${this.moduleName}::getId, id)\n        );\n  }\n}\n      `;return h()(e,v)},generateImplCode(){let e=`\n@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class ${this.moduleName}ServiceImpl implements I${this.moduleName}Service {\n    private final ${this.moduleName}Repository repository;\n    private final DepartmentFeignClient departmentApi;\n\n    @Override\n    public PageVO<${this.moduleName}ListVO> findPage(${this.moduleName}PageCondition condition) {\n        JwtBody jwtBody = condition.getJwtBody();\n        List<Long> canAccessDepartmentIds = departmentApi.getIdsWithPrivilegeConfig(jwtBody.getUserId()).getData();\n        if (CollectionUtils.isEmpty(canAccessDepartmentIds)) {\n            return PageVO.empty();\n        }\n        condition.setCanAccessDepartmentIds(canAccessDepartmentIds);\n        IPage<${this.moduleName}> page = repository.findPage(condition);\n        List<${this.moduleName}> records = page.getRecords();\n        if (records.isEmpty()) {\n            return PageVO.empty();\n        }\n\n\n        List<${this.moduleName}ListVO> vos = records.stream()\n                .map(${this.moduleName}ListVO::from)\n                .collect(Collectors.toList());\n\n        return PageVO.create(page, vos);\n    }\n}\n      `;return h()(e,v)},generateServiceCode(){let e=`\npublic interface I${this.moduleName}Service {\n  PageVO<${this.moduleName}ListVO> findPage(${this.moduleName}PageCondition condition);\n}      \n      `;return h()(e,v)}}},g=C,f=(0,i.Z)(g,m,c,!1,null,"1e695790",null),y=f.exports;r["default"].use(p.ZP);const b=[{path:"/",name:"generateJavaTemplate",component:y}],N=new p.ZP({mode:"history",base:"/",routes:b});var $=N,w=a(408);r["default"].use(w.ZP);var _=new w.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),T=a(5114),S=a.n(T),I=a(3197),A=(a(4457),a(8519)),O=a.n(A);r["default"].use(S()),r["default"].config.productionTip=!1,r["default"].directive("highlight",{inserted:function(e){const t=e.querySelectorAll("pre code");t.forEach((e=>{I.Z.highlightBlock(e),e.parentNode.style.position="relative"}))}}),r["default"].directive("clipboard",{inserted:function(e,t){const a=new(O())(e,{text:function(){return t.value}});a.on("success",(function(){r["default"].prototype.$message({message:"复制成功",type:"success"})})),a.on("error",(function(){r["default"].prototype.$message.error("复制失败")}))}}),new r["default"]({router:$,store:_,render:e=>e(d)}).$mount("#app")}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,s){if(!r){var i=1/0;for(p=0;p<e.length;p++){r=e[p][0],o=e[p][1],s=e[p][2];for(var n=!0,l=0;l<r.length;l++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(n=!1,s<i&&(i=s));if(n){e.splice(p--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[r,o,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,s,i=r[0],n=r[1],l=r[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(l)var p=l(a)}for(t&&t(r);d<i.length;d++)s=i[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(p)},r=self["webpackChunkgenerate_java_template"]=self["webpackChunkgenerate_java_template"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(9499)}));r=a.O(r)})();
//# sourceMappingURL=app.84a55d0f.js.map